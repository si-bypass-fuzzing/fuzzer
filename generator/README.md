# Jabby - A generator for HTML/JS documents that cover the Browser API

## Structure

- [webidl2json](./webidl2json): a tool that transforms .idl files to JSON
- [jabby](./jabby/): an HTML/JS generator written in Python that creates documents with JS code that invokes the browser API
  - [web_grammar](./jabby/web_grammar/): parses the JSON generated by webidl2json and enhances the grammar
    - [js](./jabby/web_grammar/js/): grammar for the std builtin objects and classes of Javascript
    - [webidl](./jabby/web_grammar/webidl/): Python representations of WebIDL entities and the respective JSON parsers
    - [html](./jabby/web_grammar/html/): Python code that maps `HTML*Element` interfaces to their respective HTML tag and scrapes the MDN web docs
  - [generator](./jabby/generator/): utilizes the web grammar to create semantically valid HTML/JS documents
- [mdn](./mdn/): copy of the [MDN web docs](https://github.com/mdn/content), used to extract the keywords of HTML attributes and enhance the grammar

## Example

Read all Firefox WebIDL JSON files and write the complete grammar to `firefox.json`:

```bash
cd webidl2json && node parse.js ./idl/firefox ./json/firefox && cd -
python3 -m jabby -d webidl2json/json/firefox -o firefox.json --mdn ./mdn
```

The code in the `__main__.py`:
- parses the JSON files in the `-d` directory and constructs a grammar of available JS classes and function in the browser
- parses the files from the MDN web docs (`--mdn`) to extract keywords that some HTML attributes expect and enhance the grammar
- writes the full grammar to `-o`
- uses the grammar to generate JS code that invokes `fetch()`, `XMLHttpRequest.send()` and creates an `<iframe>`
