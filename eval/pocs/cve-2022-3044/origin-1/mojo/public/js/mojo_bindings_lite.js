(function(){'use strict';function g(a,b){a=a.split(".");let c=aa;for(let d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!=Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var aa=self;g("mojo.internal.exportModule",function(a){let b=aa;a=a.split(".");for(let c;a.length&&(c=a.shift());)b[c]||(b[c]={}),b=b[c]});var l=!!(new Uint8Array((new Uint16Array([1])).buffer))[0];function m(a){return null===a||void 0===a}function n(a){return a+(8-a%8)%8}
function p(a,b,c){l?(a.setUint32(b,Number(BigInt(c)&BigInt(4294967295)),l),a.setUint32(b+4,Number(BigInt(c)>>BigInt(32)),l)):(a.setUint32(b,Number(BigInt(c)>>BigInt(32)),l),a.setUint32(b+4,Number(BigInt(c)&BigInt(4294967295)),l))}function ba(a,b){let c=8+a.L;for(const d of a.m)a=b[d.name],d.type.$.o&&!m(a)&&(c+=n(d.type.$.o(a,d.D)));return c}function ca(a,b){return a.g===q?8+(b.length+7)>>3:8+b.length*a.g.$.f(!!a.s)}
function r(a,b){var c=ca(a,b);if(!a.g.$.o)return c;for(let d of b)m(d)||(c+=n(a.g.$.o(d,!!a.s)));return c}function da(a,b){if(l){var c=a.getUint32(b,l);a=a.getUint32(b+4,l)}else c=a.getUint32(b+4,l),a=a.getUint32(b,l);c=BigInt(a)<<BigInt(32)|BigInt(c);return c<=BigInt(Number.MAX_SAFE_INTEGER)?Number(c):c}function t(a,b){b=n(b);const c=new DataView(a.buffer,a.a,b);a.a+=b;return c}
var fa=class{constructor(a,b,c,d,e){let f,h;0==(a&3)?(f=24,h=0):(f=32,h=1);var k=f+ba(d,e);this.buffer=new ArrayBuffer(k);this.handles=[];k=new DataView(this.buffer);k.setUint32(0,f,l);k.setUint32(4,h,l);k.setUint32(8,0);k.setUint32(12,b,l);k.setUint32(16,a,l);k.setUint32(20,0);0<h&&p(k,24,c);this.a=f;a=t(this,8+d.L);ea(new u(this,a),d,e)}};function ha(a){v||(v=new TextEncoder("utf-8"));return v.encode(a)}
function ea(a,b,c){w(a,0,8+b.L);w(a,4,0);for(const d of b.m){const e=8+d.T;if(c&&c instanceof Object&&!m(c[d.name]))d.type.$.encode(c[d.name],a,e,d.R,d.D);else if(null!==d.defaultValue)d.type.$.encode(d.defaultValue,a,e,d.R,d.D);else if(d.D)d.type.$.w(a,e);else throw Error(b.name+' missing value for non-nullable field "'+d.name+'"');}}function ia(a,b,c,d){const e=a.j.getUint8(b);d?a.j.setUint8(b,e|1<<c):a.j.setUint8(b,e&~(1<<c))}function w(a,b,c){a.j.setUint32(b,c,l)}
function x(a,b,c){w(a,b,a.u.handles.length);a.u.handles.push(c)}function y(a,b,c,d){const e=ca(b,d),f=t(a.u,e),h=new u(a.u,f);z(a,c,f.byteOffset);w(h,0,e);w(h,4,d.length);a=8;if(b.g===q){b=0;for(const k of d)ia(h,a,b,k),b++,8==b&&(b=0,a++)}else for(const k of d){if(null===k){if(!b.s)throw Error("Trying to send a null element in an array of non-nullable elements");b.g.$.w(h,a)}b.g.$.encode(k,h,a,0,!!b.s);a+=b.g.$.f(!!b.s)}}function z(a,b,c){p(a.j,b,c-a.j.byteOffset-b)}
function ja(a,b,c,d){let e,f;d instanceof Map?(e=Array.from(d.keys()),f=Array.from(d.values())):(e=Object.keys(d),f=e.map(L=>d[L]));const h=t(a.u,24),k=new u(a.u,h);z(a,c,h.byteOffset);w(k,0,24);w(k,4,0);y(k,{g:b.P},8,e);y(k,{g:b.valueType,s:b.V},16,f)}
function ka(a,b,c,d){var e=Object.keys(d);if(1!==e.length)throw Error(`Value for ${b.name} must be an Object with a `+"single property named one of: "+Object.keys(b.m).join(","));e=e[0];b=b.m[e];w(a,c,16);w(a,c+4,b.ordinal);c+=8;if("undefined"!==typeof b.type.$.G){{b=b.type.$.G;d=d[e];e=t(a.u,16);const f=new u(a.u,e);z(a,c,e.byteOffset);ka(f,b,0,d)}}else b.type.$.encode(d[e],a,c,0,b.nullable)}var u=class{constructor(a,b){this.u=a;this.j=b}},v=null;
function la(a,b,c){return!!(a.h.getUint8(b)&1<<c)}function A(a,b){return a.h.getUint32(b,l)}function B(a,b){b=a.h.getUint32(b,l);if(4294967295==b)return null;if(b>=a.C.length)throw Error("Decoded invalid handle index");return a.C[b]}
function C(a,b,c){c=D(a,c);if(!c)return null;a=new E(new DataView(a.h.buffer,c),a.C);A(a,0);c=A(a,4);if(!c)return[];const d=[];if(b.g===q)for(b=0;b<c;++b)d.push(la(a,8+(b>>3),b%8));else{let e=8;for(let f=0;f<c;++f){const h=b.g.$.decode(a,e,0,!!b.s);if(null===h&&!b.s)throw Error("Received unexpected array element");d.push(h);e+=b.g.$.f(!!b.s)}}return d}function D(a,b){const c=da(a.h,b);return 0==c?0:a.h.byteOffset+b+c}
function F(a,b){A(a,0);A(a,4);const c={};for(const d of b.m){const e=d.type.$.decode(a,8+d.T,d.R,!!d.D);if(null===e&&!d.D)throw Error("Received "+b.name+' with invalid null field "'+d.name+'"');c[d.name]=e}return c}
function ma(a,b,c){if(0===A(a,c))return null;var d=A(a,c+4);for(const e in b.m){const f=b.m[e];if(f.ordinal===d){d=c+8;"undefined"!==typeof f.type.$.G?(c=f.type.$.G,a=(d=D(a,d))?ma(new E(new DataView(a.h.buffer,d),a.C),c,0):null):a=f.type.$.decode(a,d,0,f.nullable);if(null===a&&!f.nullable)throw Error(`Received ${b.name} with invalid null `+`field: ${f.name}`);b={};b[e]=a;return b}}}var E=class{constructor(a,b){this.h=a;this.C=b}},G=null;
function H(a,b,c,d,e,f){b=new fa(d,b,c,e.$.B,f);a.writeMessage(b.buffer,b.handles)}function na(a){var b=a.getUint32(0,l);const c=a.getUint32(4,l);if(0==c&&24!=b||1==c&&32!=b||2<c)throw Error("Received invalid message header");if(2==c)throw Error("v2 messages not yet supported");b={N:b,F:a.getUint32(12,l),flags:a.getUint32(16,l)};b.requestId=0<c?a.getUint32(24,l):0;return b}var q={$:{encode:function(a,b,c,d){ia(b,c,d,a)},decode:function(a,b,c){return la(a,b,c)},c:!0}};g("mojo.internal.Bool",q);
g("mojo.internal.Int8",{$:{encode:function(a,b,c){b.j.setInt8(c,a)},decode:function(a,b){return a.h.getInt8(b)},f:()=>1,c:!0}});var I={$:{encode:function(a,b,c){b.j.setUint8(c,a)},decode:function(a,b){return a.h.getUint8(b)},f:()=>1,c:!0}};g("mojo.internal.Uint8",I);g("mojo.internal.Int16",{$:{encode:function(a,b,c){b.j.setInt16(c,a,l)},decode:function(a,b){return a.h.getInt16(b,l)},f:()=>2,c:!0}});
g("mojo.internal.Uint16",{$:{encode:function(a,b,c){b.j.setUint16(c,a,l)},decode:function(a,b){return a.h.getUint16(b,l)},f:()=>2,c:!0}});g("mojo.internal.Int32",{$:{encode:function(a,b,c){b.j.setInt32(c,a,l)},decode:function(a,b){return a.h.getInt32(b,l)},f:()=>4,c:!0}});var J={$:{encode:function(a,b,c){w(b,c,a)},decode:function(a,b){return A(a,b)},f:()=>4,c:!0}};g("mojo.internal.Uint32",J);
var oa={$:{encode:function(a,b,c){b=b.j;l?(b.setUint32(c,Number(BigInt(a)&BigInt(4294967295)),l),b.setInt32(c+4,Number(BigInt(a)>>BigInt(32)),l)):(b.setInt32(c,Number(BigInt(a)>>BigInt(32)),l),b.setUint32(c+4,Number(BigInt(a)&BigInt(4294967295)),l))},decode:function(a,b){var c=a.h;l?(a=c.getUint32(b,l),b=c.getInt32(b+4,l)):(a=c.getUint32(b+4,l),b=c.getInt32(b,l));b=BigInt(b)<<BigInt(32)|BigInt(a);return b=b<=BigInt(Number.MAX_SAFE_INTEGER)&&b>=BigInt(Number.MIN_SAFE_INTEGER)?Number(b):b},f:()=>8,
c:!0}};g("mojo.internal.Int64",oa);g("mojo.internal.Uint64",{$:{encode:function(a,b,c){p(b.j,c,a)},decode:function(a,b){return da(a.h,b)},f:()=>8,c:!0}});g("mojo.internal.Float",{$:{encode:function(a,b,c){b.j.setFloat32(c,a,l)},decode:function(a,b){return a.h.getFloat32(b,l)},f:()=>4,c:!0}});g("mojo.internal.Double",{$:{encode:function(a,b,c){b.j.setFloat64(c,a,l)},decode:function(a,b){return a.h.getFloat64(b,l)},f:()=>8,c:!0}});
var K={$:{encode:function(a,b,c){x(b,c,a)},w:function(){},decode:function(a,b){return B(a,b)},f:()=>4,c:!1}};g("mojo.internal.Handle",K);var pa={$:{encode:function(a,b,c){if("string"!==typeof a)throw Error("Unxpected non-string value for string field.");y(b,{g:I},c,ha(a))},w:function(){},decode:function(a,b){G||(G=new TextDecoder("utf-8"));return G.decode((new Uint8Array(C(a,{g:I},b))).buffer)},o:function(a){return r({g:I},ha(a))},f:()=>8,c:!0}};g("mojo.internal.String",pa);
function M(a,b){const c={g:a,s:b};return{$:{fa:c,encode:function(d,e,f){y(e,c,f,d)},w:function(){},decode:function(d,e){return C(d,c,e)},o:function(d){return r(c,d)},f:()=>8,c:!1}}}g("mojo.internal.Array",M);
g("mojo.internal.Map",function(a,b,c){const d={P:a,valueType:b,V:c};return{$:{ga:d,encode:function(e,f,h){ja(f,d,h,e)},w:function(){},decode:function(e,f){if(f=D(e,f)){f=new E(new DataView(e.h.buffer,f),e.C);e=A(f,0);var h=A(f,4);if(24!=e||0!=h)throw Error("Received invalid map data");e=C(f,{g:d.P},8);f=C(f,{g:d.valueType,s:d.V},16);if(e.length!=f.length)throw Error("Received invalid map data");if(d.P.$.c){h={};for(var k=0;k<e.length;++k)h[e[k]]=f[k];e=h}else{h=new Map;for(k=0;k<e.length;++k)h.set(e[k],
f[k]);e=h}}else e=null;return e},o:function(e){const f=e instanceof Map?Array.from(e.keys()):Object.keys(e),h=e instanceof Map?Array.from(e.values()):f.map(k=>e[k]);return 24+r({g:a},f)+r({g:b,s:c},h)},f:()=>8,c:!1}}});function qa(){return{$:{encode:function(a,b,c){w(b,c,a)},decode:function(a,b){return a.h.getInt32(b,l)},f:()=>4,c:!0}}}g("mojo.internal.Enum",qa);function N(a,b,c,d,e,f){return{name:a,T:b,R:c,type:d,defaultValue:e,D:f}}g("mojo.internal.StructField",N);
function O(a,b,c,d){const e={name:b,L:c,m:d};a.$={B:e,encode:function(f,h,k){{const L=t(h.u,8+e.L),Qa=new u(h.u,L);z(h,k,L.byteOffset);ea(Qa,e,f)}},w:function(){},decode:function(f,h){return f=(h=D(f,h))?F(new E(new DataView(f.h.buffer,h),f.C),e):null},o:function(f){return ba(e,f)},f:()=>8,c:!1}}g("mojo.internal.Struct",O);g("mojo.internal.createStructDeserializer",function(a){return function(b){if(void 0==a.$||void 0==a.$.B)throw Error("Invalid struct mojom type!");return F(new E(b,[]),a.$.B)}});
function P(a,b,c){const d={name:b,m:c};a.$={G:d,encode:function(e,f,h){ka(f,d,h,e)},w:function(){},decode:function(e,f){return ma(e,d,f)},o:function(e,f){{f=f?16:0;var h=Object.keys(e);if(1!==h.length)throw Error(`Value for ${d.name} must be an Object with a `+"single property named one of: "+Object.keys(d.m).join(","));const k=h[0];h=d.m[k];e=e[k];m(e)||(h.type.$.G?f+=n(h.type.$.o(e,!0)):h.type.$.o&&(f+=n(h.type.$.o(e,h.nullable))));e=f}return e},f:e=>e?8:16,c:!1}}g("mojo.internal.Union",P);
g("mojo.internal.InterfaceProxy",function(a){return{$:{encode:function(b,c,d){if(!(b instanceof a))throw Error("Invalid proxy type. Expected "+a.name);if(!b.proxy.handle)throw Error("Unexpected null "+a.name);x(c,d,b.proxy.handle);w(c,d+4,0);b.proxy.U()},w:function(b,c){w(b,c,4294967295)},decode:function(b,c){{const d=B(b,c);A(b,c+4);b=d?new a(d):null}return b},f:()=>8,c:!1}}});
g("mojo.internal.InterfaceRequest",function(a){return{$:{encode:function(b,c,d){if(!(b instanceof a))throw Error("Invalid request type. Expected "+a.name);if(!b.handle)throw Error("Unexpected null "+a.name);x(c,d,b.handle)},w:function(b,c){w(b,c,4294967295)},decode:function(b,c){return b=(b=B(b,c))?new a(b):null},f:()=>8,c:!1}}});
g("mojo.internal.AssociatedInterfaceProxy",function(a){return{$:{type:a,encode:function(){throw Error("Associated interfaces not supported yet.");},decode:function(){throw Error("Associated interfaces not supported yet.");},c:!1}}});g("mojo.internal.AssociatedInterfaceRequest",function(a){return{$:{type:a,encode:function(){throw Error("Associated interfaces not supported yet.");},decode:function(){throw Error("Associated interfaces not supported yet.");},c:!1}}});g("mojo.interfaceControl.RUN_MESSAGE_ID",4294967295);g("mojo.interfaceControl.RUN_OR_CLOSE_PIPE_MESSAGE_ID",4294967294);var Q={$:{}};g("mojo.interfaceControl.RunMessageParamsSpec",Q);var R={$:{}};g("mojo.interfaceControl.RunResponseMessageParamsSpec",R);var S={$:{}};g("mojo.interfaceControl.QueryVersionSpec",S);var T={$:{}};g("mojo.interfaceControl.QueryVersionResultSpec",T);var ra={$:{}};g("mojo.interfaceControl.FlushForTestingSpec",ra);var sa={$:{}};
g("mojo.interfaceControl.RunOrClosePipeMessageParamsSpec",sa);var ta={$:{}};g("mojo.interfaceControl.RequireVersionSpec",ta);var ua={$:{}};g("mojo.interfaceControl.EnableIdleTrackingSpec",ua);var va={$:{}};g("mojo.interfaceControl.MessageAckSpec",va);var wa={$:{}};g("mojo.interfaceControl.NotifyIdleSpec",wa);var xa={$:{}};g("mojo.interfaceControl.RunInputSpec",xa);var ya={$:{}};g("mojo.interfaceControl.RunOutputSpec",ya);var za={$:{}};g("mojo.interfaceControl.RunOrClosePipeInputSpec",za);
O(Q.$,"RunMessageParams",16,[N("input",0,0,xa.$,null,!1)]);O(R.$,"RunResponseMessageParams",16,[N("output",0,0,ya.$,null,!0)]);O(S.$,"QueryVersion",0,[]);O(T.$,"QueryVersionResult",8,[N("version",0,0,J,0,!1)]);O(ra.$,"FlushForTesting",0,[]);O(sa.$,"RunOrClosePipeMessageParams",16,[N("input",0,0,za.$,null,!1)]);O(ta.$,"RequireVersion",8,[N("version",0,0,J,0,!1)]);O(ua.$,"EnableIdleTracking",8,[N("timeoutInMicroseconds",0,0,oa,0,!1)]);O(va.$,"MessageAck",0,[]);O(wa.$,"NotifyIdle",0,[]);
P(xa.$,"RunInput",{queryVersion:{ordinal:0,type:S.$},flushForTesting:{ordinal:1,type:ra.$}});P(ya.$,"RunOutput",{queryVersionResult:{ordinal:0,type:T.$}});P(za.$,"RunOrClosePipeInput",{requireVersion:{ordinal:0,type:ta.$},enableIdleTracking:{ordinal:1,type:ua.$},messageAck:{ordinal:2,type:va.$},notifyIdle:{ordinal:3,type:wa.$}});var Aa={$:qa()};g("mojo.native.SerializedHandleTypeSpec",Aa);g("mojo.native.SerializedHandleType",{ca:0,da:1,ea:2,ba:3,aa:4,MIN_VALUE:0,MAX_VALUE:4});var Ba={$:{}};g("mojo.native.SerializedHandleSpec",Ba);var Ca={$:{}};g("mojo.native.NativeStructSpec",Ca);O(Ba.$,"SerializedHandle",8,[N("theHandle",0,0,K,null,!1),N("type",4,0,Aa.$,0,!1)]);O(Ca.$,"NativeStruct",16,[N("data",0,0,M(I,!1),null,!1),N("handles",8,0,M(Ba.$,!1),null,!0)]);g("mojo.pipeControl.RUN_OR_CLOSE_PIPE_MESSAGE_ID",4294967294);var Da={$:{}};g("mojo.pipeControl.RunOrClosePipeMessageParamsSpec",Da);var Ea={$:{}};g("mojo.pipeControl.DisconnectReasonSpec",Ea);var Fa={$:{}};g("mojo.pipeControl.PeerAssociatedEndpointClosedEventSpec",Fa);var Ga={$:{}};g("mojo.pipeControl.PauseUntilFlushCompletesSpec",Ga);var Ha={$:{}};g("mojo.pipeControl.FlushAsyncSpec",Ha);var Ia={$:{}};g("mojo.pipeControl.RunOrClosePipeInputSpec",Ia);
O(Da.$,"RunOrClosePipeMessageParams",16,[N("input",0,0,Ia.$,null,!1)]);O(Ea.$,"DisconnectReason",16,[N("customReason",0,0,J,0,!1),N("description",8,0,pa,null,!1)]);O(Fa.$,"PeerAssociatedEndpointClosedEvent",16,[N("id",0,0,J,0,!1),N("disconnectReason",8,0,Ea.$,null,!0)]);O(Ga.$,"PauseUntilFlushCompletes",8,[N("flushPipe",0,0,K,null,!1)]);O(Ha.$,"FlushAsync",8,[N("flusherPipe",0,0,K,null,!1)]);
P(Ia.$,"RunOrClosePipeInput",{peerAssociatedEndpointClosedEvent:{ordinal:0,type:Fa.$},pauseUntilFlushCompletes:{ordinal:1,type:Ga.$},flushAsync:{ordinal:2,type:Ha.$}});function Ja(a,b){var c={flushForTesting:{}};return new Promise(d=>{H(a.a,4294967295,b,1,Q.$,{input:c});a.b.set(b,d)})}function Ka(a,b,c){return 4294967295===b.F?(c=new DataView(c,b.N),c=new E(c,[]),b.flags&1?(b=b.requestId,F(c,Q.$.$.B).input.hasOwnProperty("flushForTesting")?(H(a.a,4294967295,b,2,R.$,{output:null}),a=!0):a=!1):(a=a.b.get(b.requestId))?(a(),a=!0):a=!1,a):!1}
var La=class{constructor(a){this.a=a;this.b=new Map}},Ma=class{constructor(a,b,c,d,e){this.requestId=a;this.F=b;this.i=c;this.b=d;this.a=e}};function Na(a){for(const b of a.a.values())b()}var U=class{constructor(){this.a=new Map;this.b=0}addListener(a){const b=++this.b;this.a.set(b,a);return b}removeListener(a){return this.a.delete(a)}};g("mojo.internal.interfaceSupport.ConnectionErrorEventRouter",U);U.prototype.removeListener=U.prototype.removeListener;U.prototype.addListener=U.prototype.addListener;
g("mojo.internal.interfaceSupport.PendingReceiver",class{get handle(){}});function Oa(a,b){Pa(a.b);a.b=null;for(const c of a.a.keys())a.a.get(c).a(Error(b));a.a=new Map}
var V=class{constructor(a,b){this.handle=null;this.X=a;this.b=null;this.A=0;this.a=new Map;this.l=null;this.K=new U;b instanceof MojoHandle&&this.v(b)}H(){let {handle0:a,handle1:b}=Mojo.createMessagePipe();this.v(a);return new this.X(b)}v(a){if(this.handle)throw Error("Remote already bound.");this.handle=a;const b=new Ra(a);b.l=this.O.bind(this);b.i=this.i.bind(this);b.start();this.l=new La(a);this.b=b;this.A=0;this.a=new Map}U(){if(this.b){var a=this.b;a.a&&(a.a.cancel(),a.a=null)}}close(){Oa(this,
"Message pipe closed.")}M(){return this.K}Z(a,b,c,d){if(!this.handle)throw Error("Attempting to use an unbound remote. Try $.bindNewPipeAndPassReceiver() first.");if(c&&(!this.b||null===this.b.a))return Promise.reject(Error("The pipe has already been closed."));const e=this.A++,f={};b.$.B.m.forEach((h,k)=>f[h.name]=d[k]);H(this.handle,a,e,c?1:0,b,f);return c?new Promise((h,k)=>{this.a.set(e,new Ma(e,a,c,h,k))}):Promise.resolve()}J(){return Ja(this.l,this.A++)}O(a,b){var c=new DataView(a);c=na(c);
if(!Ka(this.l,c,a)){if(!(c.flags&2)||c.flags&1)return this.i("Received unexpected request message");var d=this.a.get(c.requestId);this.a.delete(c.requestId);if(!d)return this.i("Received unexpected response message");a=F(new E(new DataView(a,c.N),b),d.i.$.B);if(!a||c.F!==d.F)return this.i("Received malformed response message");d.b(a)}}i(a){Oa(this,a);Na(this.K)}};g("mojo.internal.interfaceSupport.InterfaceRemoteBase",V);V.prototype.flushForTesting=V.prototype.J;V.prototype.sendMessage=V.prototype.Z;
V.prototype.getConnectionErrorEventRouter=V.prototype.M;V.prototype.close=V.prototype.close;V.prototype.unbind=V.prototype.U;V.prototype.bindHandle=V.prototype.v;var W=class{constructor(a){this.a=a}H(){return this.a.H()}close(){this.a.close()}J(){return this.a.J()}};g("mojo.internal.interfaceSupport.InterfaceRemoteBaseWrapper",W);W.prototype.flushForTesting=W.prototype.J;W.prototype.close=W.prototype.close;W.prototype.bindNewPipeAndPassReceiver=W.prototype.H;
var Sa=class{constructor(){this.a=new Map;this.b=0}removeListener(a){this.a.get(a)();return this.a.delete(a)}};g("mojo.internal.interfaceSupport.CallbackRouter",Sa);Sa.prototype.removeListener=Sa.prototype.removeListener;
var X=class{constructor(a){this.a=new Map;this.b=a}addListener(a){const b=++this.b.b;this.a.set(b,a);this.b.a.set(b,()=>this.a.delete(b));return b}W(a){return a?this.i.bind(this):this.l.bind(this)}l(a){const b=Array.from(arguments);this.a.forEach(c=>c.apply(null,b))}i(a){const b=Array.from(arguments),c=Array.from(this.a.values()).map(e=>e.apply(null,b));let d;for(const e of c)if(void 0!==e){if(void 0!==d)throw Error("Multiple listeners attempted to reply to a message");d=e}return d}};
g("mojo.internal.interfaceSupport.InterfaceCallbackReceiver",X);X.prototype.createReceiverHandler=X.prototype.W;X.prototype.addListener=X.prototype.addListener;
var Ta=class{constructor(a,b,c){this.b=a;this.a=b;this.i=c}},Y=class{constructor(a){this.a=new Map;this.O=a;this.i=new Map;this.A=null;this.l=new U}Y(a,b,c,d){this.i.set(a,new Ta(b,c,d))}v(a){const b=new Ra(a);this.a.set(a,b);b.l=this.K.bind(this,a);b.i=this.b.bind(this,a);b.start();this.A=new La(a)}I(){let a=new this.O;this.v(a.$.H().handle);return a}S(){for(const a of this.a.values())Pa(a);this.a.clear()}M(){return this.l}K(a,b,c){const d=new DataView(b),e=na(d);if(!Ka(this.A,e,b)){if(e.flags&2)throw Error("Received unexpected response on interface receiver");
var f=this.i.get(e.F);if(!f)throw Error("Received unknown message");var h=F(new E(new DataView(b,e.N),c),f.b.$.B);if(!h)throw Error("Received malformed message");b=f.i.apply(null,f.b.$.B.m.map(k=>h[k.name]));if(f.a){if(void 0===b)throw this.b(a),Error("Message expects a reply but its handler did not provide one.");b instanceof Promise||(b=Promise.resolve(b));b.then(k=>{H(a,e.F,e.requestId,2,f.a,k)}).catch(()=>{this.b(a)})}}}b(a){const b=this.a.get(a);b&&(Na(this.l),Pa(b),this.a.delete(a))}};
g("mojo.internal.interfaceSupport.InterfaceReceiverHelperInternal",Y);Y.prototype.getConnectionErrorEventRouter=Y.prototype.M;Y.prototype.closeBindings=Y.prototype.S;Y.prototype.bindNewPipeAndPassRemote=Y.prototype.I;Y.prototype.bindHandle=Y.prototype.v;Y.prototype.registerHandler=Y.prototype.Y;var Z=class{constructor(a){this.a=a}v(a){this.a.v(a)}I(){return this.a.I()}close(){this.a.S()}};g("mojo.internal.interfaceSupport.InterfaceReceiverHelper",Z);Z.prototype.close=Z.prototype.close;
Z.prototype.bindNewPipeAndPassRemote=Z.prototype.I;Z.prototype.bindHandle=Z.prototype.v;function Pa(a){a.a&&(a.a&&(a.a.cancel(),a.a=null),a.b.close())}
var Ra=class{constructor(a){this.b=a;this.l=null;this.i=()=>{};this.a=null}start(){this.a=this.b.watch({readable:!0},this.A.bind(this))}A(){for(;this.a;){const a=this.b.readMessage();if(a.result==Mojo.RESULT_SHOULD_WAIT)break;if(a.result==Mojo.RESULT_FAILED_PRECONDITION){this.i();break}if(a.result!=Mojo.RESULT_OK)throw Error("Unexpected error on HandleReader: "+a.result);this.l(a.buffer,a.handles)}}};}).call(this);
